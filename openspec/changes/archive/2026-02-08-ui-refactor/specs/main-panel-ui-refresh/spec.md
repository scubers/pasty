## 新增需求

### 需求：主面板布局结构
主面板 SHALL 显示分栏布局，顶部为搜索栏，左侧为项目列表（占 55% 宽度），右侧为预览面板（占 45% 宽度），底部为状态栏。

#### 场景：主面板显示正确的布局比例
- **当** 用户打开主面板时
- **那么** 面板 SHALL 在顶部显示搜索栏，项目列表占据内容宽度的 55%，预览面板占据内容宽度的 45%，底部显示状态栏
- **那么** 布局 SHALL 可调整大小，同时保持 55/45 的分栏比例

### 需求：搜索栏视觉状态
搜索栏 SHALL 根据设计 token 显示默认、聚焦和有文本状态的视觉反馈。

#### 场景：搜索栏显示默认状态
- **当** 搜索栏没有文本且未聚焦时
- **那么** 搜索栏 SHALL 具有半透明背景（`bg-black/30`）和浅色边框（`white/10`）

#### 场景：搜索栏显示聚焦状态
- **当** 用户点击搜索栏或通过键盘导航到搜索栏时
- **那么** 搜索栏 SHALL 具有较深的背景（`bg-black/40`）、青色强调边框（`#2DD4BF`）和发光效果
- **那么** 左侧 SHALL 可见放大镜图标

#### 场景：搜索栏显示有文本状态
- **当** 搜索栏包含文本且用户清除它时
- **那么** SHALL 出现清除按钮，允许用户移除所有搜索文本
- **那么** 清除文本 SHALL 将搜索栏恢复到默认状态

### 需求：列表项悬停和选中状态
列表项 SHALL 使用玻璃形态效果为默认、悬停和选中条件显示不同的视觉状态。

#### 场景：列表项显示默认状态
- **当** 用户的鼠标不在项目上且项目未选中时
- **那么** 项目背景 SHALL 是透明的
- **那么** 项目 SHALL 显示图标（32x32）、标题（主要文本）和副标题（应用名称 + 时间前缀）

#### 场景：列表项显示悬停状态
- **当** 用户鼠标指针悬停在项目上时
- **那么** 项目背景 SHALL 变为半透明白色（`bg-white/6`）
- **那么** 所有文本元素 SHALL 保持其颜色

#### 场景：列表项显示选中状态
- **当** 用户点击项目或通过键盘导航到项目时
- **那么** 项目背景 SHALL 为青色调（`bg-[#2DD4BF]/12`）
- **那么** 左侧 SHALL 出现 3px 青色强调边框（`3px solid #2DD4BF`）
- **那么** 预览面板 SHALL 更新以显示所选项目的内容

### 需求：预览面板显示
预览面板 SHALL 在结构化布局中显示所选项目的元数据和内容，包括标题操作、元数据网格和内容视图。

#### 场景：预览面板显示文本项目
- **当** 用户选择文本剪贴板项目时
- **那么** 预览标题 SHALL 显示操作按钮（复制、编辑、删除）
- **那么** 元数据网格 SHALL 显示：类型（文本徽章）、源应用、日期/时间和大小
- **那么** 内容视图 SHALL 以等宽字体显示文本
- **那么** 如果检测到代码，文本 SHALL 支持语法高亮颜色（关键词紫色、字符串绿色、函数黄色）

#### 场景：预览面板显示图片项目
- **当** 用户选择图片剪贴板项目时
- **那么** 预览标题 SHALL 显示操作按钮（复制、编辑、删除）
- **那么** 元数据网格 SHALL 显示：类型（图片徽章）、源应用、日期/时间和尺寸
- **那么** 内容视图 SHALL 显示适应容器的图片，带有圆角

#### 场景：预览面板显示文件项目
- **当** 用户选择文件剪贴板项目时
- **那么** 预览标题 SHALL 显示操作按钮（复制、编辑、删除）
- **那么** 元数据网格 SHALL 显示：类型（文件徽章）、源应用、日期/时间和文件大小
- **那么** 内容视图 SHALL 显示文件路径和相关预览

### 需求：状态栏快捷键显示
状态栏 SHALL 显示常见操作的键盘快捷键提示（例如 Esc 关闭、Cmd+K 搜索）。

#### 场景：状态栏显示快捷键提示
- **当** 主面板显示时
- **那么** 状态栏 SHALL 在面板底部显示键盘快捷键
- **那么** 快捷键 SHALL 至少包括：Esc 关闭面板
- **那么** 快捷键 SHALL 以静音文本颜色（`#6B7280`）呈现

### 需求：焦点环和键盘导航
主面板 SHALL 为所有交互元素提供清晰的视觉焦点指示器并支持键盘导航。

#### 场景：键盘导航在列表项之间移动
- **当** 主面板具有焦点且用户按下上/下箭头键时
- **那么** 选择 SHALL 移动到上一个/下一个列表项
- **那么** 所选项目周围 SHALL 可见焦点环
- **那么** 预览面板 SHALL 更新以显示新选择项目的内容

#### 场景：Esc 键关闭面板
- **当** 主面板可见且用户按下 Esc 键时
- **那么** 面板 SHALL 关闭/隐藏
- **那么** 键盘焦点 SHALL 返回到之前聚焦的元素或应用程序

### 需求：玻璃形态背景
主面板 SHALL 使用系统材质和模糊的玻璃形态效果与用户的桌面环境融合。

#### 场景：面板显示玻璃效果
- **当** 主面板可见时
- **那么** 面板 SHALL 使用系统模糊材质（`.hudWindow` 或 `.ultraThinMaterial`）
- **那么** 背景 SHALL 是半透明的，允许桌面壁纸透过显示
- **那么** 内容 SHALL 具有足够的对比度且可读

#### 场景：卡片使用玻璃效果
- **当** 在面板内显示卡片或部分时
- **那么** 它们 SHALL 使用超薄材质，带有微妙的不透明度（`.background(.ultraThinMaterial.opacity(0.3))`）
- **那么** 卡片 SHALL 具有圆角（12px）和浅色边框

### 需求：高频交互的性能
高频主面板交互（显示/隐藏、搜索、选择、预览切换） SHALL 在性能目标内完成，而不阻塞主线程。

#### 场景：面板显示/隐藏响应迅速
- **当** 用户通过热键或菜单切换面板可见性时
- **那么** 面板 SHALL 在 100ms 内出现或消失
- **那么** 动画 SHALL 平滑，没有丢帧

#### 场景：搜索输入响应迅速
- **当** 用户在搜索栏中输入时
- **那么** 输入 SHALL 立即更新，没有延迟
- **那么** 搜索结果 SHALL 在 200ms 防抖后更新
- **那么** 输入 SHALL 不会导致丢帧

#### 场景：列表滚动平滑
- **当** 用户在包含最多 100 个项目的列表中滚动时
- **那么** 滚动 SHALL 平滑，没有卡顿
- **那么** 滚动 SHALL 保持 60fps 或更高

#### 场景：预览切换快速
- **当** 用户在列表中选择不同的项目时
- **那么** 预览面板 SHALL 在 100ms 内更新以显示新项目内容
- **那么** 过渡 SHALL 不会阻塞主线程

### 需求：用于性能的 AppKit 列表组件
项目列表 SHALL 使用带有 `NSScrollView` 的 AppKit `NSTableView`，以确保流畅的滚动和原生滚动条体验。

#### 场景：列表使用 NSTableView
- **当** 显示项目列表时
- **那么** 它 SHALL 使用包装在 `NSScrollView` 中的 `NSTableView`
- **那么** 滚动条 SHALL 是原生 macOS 自动隐藏滚动条
- **那么** 列表 SHALL 支持键盘导航（上/下箭头、上/下页、Home/End）

### 需求：用于长内容的 AppKit 文本预览
文本预览 SHALL 使用 AppKit `NSTextView` 来处理长文本内容，以避免 SwiftUI Text 渲染性能问题。

#### 场景：长文本使用 NSTextView
- **当** 所选项目包含长文本内容（>200 字符）时
- **那么** 预览 SHALL 使用包装在 `NSScrollView` 中的 `NSTextView`
- **那么** 文本 SHALL 可选择但不可编辑
- **那么** 文本 SHALL 以等宽字体显示
- **那么** 即使对于很长的文本，滚动 SHALL 也是平滑的

### 需求：异步图片加载
图片预览 SHALL 异步加载，以防止磁盘 I/O 操作阻塞主线程。

#### 场景：图片异步加载
- **当** 用户选择图片剪贴板项目时
- **那么** 图片 SHALL 在后台队列上加载
- **那么** 主线程 SHALL 在图片加载期间不会阻塞
- **那么** 图片加载时 SHALL 显示占位符
- **那么** 加载的图片 SHALL 在准备好时显示

#### 场景：大图片不会导致延迟
- **当** 用户选择大图片文件（>10MB）时
- **那么** UI SHALL 在加载期间保持响应
- **那么** 图片 SHALL 被缩放或显示缩略图预览
- **那么** 面板 SHALL 不会冻结或变得无响应
